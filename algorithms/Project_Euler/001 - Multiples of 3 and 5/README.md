# [Числа, кратные 3 или 5](https://www.codewars.com/kata/54bb6ee72c4715684d0008f9/python)

## [Проблема](https://euler.jakumo.org/problems/view/1.html)

> Если выписать все натуральные числа меньше 10, кратные 3 или 5, то получим 3, 5, 6 и 9. Сумма этих чисел равна 23.
>Найдите сумму всех чисел меньше n, кратных 3 или 5.

``` python
solution (10) # => 23 = 3 + 5 + 6 + 9
solution (20) # => 78 = 3 + 5 + 6 + 9 + 10 + 12 + 15 + 18
solution (50000000000000000000000000000000000000000) # => 583333333333333333333333333333333333333291666666666666666666666666666666666666668
```
*Решение должно работать для действительно больших чисел (более 1 000 000).*

----
## Частное решение (1)

- найти кратные 3 и 5, вплоть до входного числа
- суммировать полученный набор чисел

```python
sum([e for e in range(3, n) if e % 3 == 0 or e % 5 == 0])
```
``` text

  №      Время  Замедление        Число         Результат
---  ---------  ------------  ---------  ----------------
  1  0.0008558  0.086%            10000          23331668
  2  0.0090392  0.82%            100000        2333316668
  3  0.0944349  8.54%           1000000      233333166668
  4  0.950324   85.59%         10000000    23333331666668
  5  9.60341    865.31%       100000000  2333333316666668
```
*[-] Проходит все n-чисел*, эффективнее было-бы проскакивать ненужные числа.
Поэтому более эффективный подход будет опираться на само определение кратности.

----
## Частное решение (2)

```python
def solution(n):
    xmulti = []
    zmulti = []
    z = 3
    x = 5
    temp = 1
    while True:
        result = z * temp
        if result < n:
            zmulti.append(result)
            temp += 1
        else:
            temp = 1
            break
    while True:
        result = x * temp
        if result < n:
            xmulti.append(result)
            temp += 1
        else:
            break
    collection = list(set(xmulti + zmulti))
    return sum(collection)
```
``` text

  №      Время  Замедление        Число         Результат
---  ---------  ------------  ---------  ----------------
  1  0.0008558  0.086%            10000          23331668
  2  0.0090392  0.82%            100000        2333316668
  3  0.0944349  8.54%           1000000      233333166668
  4  0.950324   85.59%         10000000    23333331666668
  5  9.60341    865.31%       100000000  2333333316666668
```
*[-] Проходит некоторые числа по 2 раза*, эффективнее было-бы проходить только 1 раз.

----
## Частное решение (3)

Возьмём массив и вычислим разницу между текущим и предыдущим элементом.
```python
difference  = [3] + [arr[i]- arr[i-1] for i in range(1, len(arr))]
# [ 3, 2, 1, 3, 1, 2, 3, 3, 2, 1, 3, 1, 2, 3, 3, 2, 1, 3, 1, 2, 3, 3, 2, 1, 3, 1, 2, 3, 3, 2, 1, 3, 1, 2, 3, 3, 2, 1]
```

`3, 2, 1, 3, 1, 2, 3`. Я уверен, что есть математическая формула, чтобы восстановить этот паттерн, но я буду принимать его как данность.
Используя эти значения, можно практически рассматривать каждое кратное 3 или 5 только один раз. 

```python
def solution(number):
    result_sum = 0
    counter = 0
    while 1:
        counter += 3
        if counter >= number:
            break
        result_sum += counter
        counter += 2
        if counter >= number:
            break
        result_sum += counter
        counter += 1
        if counter >= number:
            break
        result_sum += counter
        counter += 3
        if counter >= number:
            break
        result_sum += counter
        counter += 1
        if counter >= number:
            break
        result_sum += counter
        counter += 2
        if counter >= number:
            break
        result_sum += counter
        counter += 3
        if counter >= number:
            break
        result_sum += counter
    return result_sum
```
``` text
 №       Время  Замедление         Число           Результат
---  ----------  ------------  ----------  ------------------
  0   0.0003415  0.034%             10000            23331668
  1   0.0035757  0.358%            100000          2333316668
  2   0.0360629  3.25%            1000000        233333166668
  3   0.35144    31.54%          10000000      23333331666668
  4   3.49214    314.07%        100000000    2333333316666668
  5  34.0755     3058.33%      1000000000  233333333166666668
```
----
## Общее решение (1)

- Для нахождения суммы применяется арифметическая прогрессия $S = \frac{n(n-1)}{2}$.

```python
def summ(number, d):
    n = (number - 1) // d
    return n * (n + 1) * d // 2
        
def solution(number):
    return summ(number, 3) + summ(number, 5) - summ(number, 15)
```
```text
  №    Время  Замедление        Число         Результат
---  -------  ------------  ---------  ----------------
  1  2.1e-06   0.00%            10000          23331668
  2  1.4e-06   0.00%           100000        2333316668
  3  1.2e-06   0.00%          1000000      233333166668
  4  1e-06     0.00%         10000000    23333331666668
  5  1e-06     0.00%        100000000  2333333316666668
```